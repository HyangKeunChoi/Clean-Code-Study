# [Clean Code] 9. 단위 테스트

### 들어가기에 앞서..

- 클린코드와 더불어 언급되는 TDD 기반 프로그래밍!
TDD 기반 프로그래밍의 주제인 테스트 코드에 대해 공부하는 주제이다.
- TDD 기반 프로그래밍이란?
Test Driven Development : 테스트 주도 개발로 **테스트가 개발을 이끌어나간다는 개념**이다.

구체적으로, 테스트를 먼저 만들고 해당 테스트를 통과하기 위한 코드를 짜는 방식이다.
기존 방식은 선 프로그래밍 후 테스트 하지만 이것의 순서를 반대로 바꾸는 것이 TDD를 적용하는 것이다!

TDD의 장점은 간략하게 정리하자면,
피드백이 자주 이루어지기에 만족도가 높으며
결함이 1/2 ~ 1/10 까지도 줄어들며
코드의 복잡도를 떨어뜨려 깨끗한 코드(클린코드)를 만들고 이에 따라 유지보수 비용을 낮출 수 있다!

### 테스트 코드는 왜 중요한가?

- 너무나도 당연하게, 버그를 잡아주기 때문이다!
- 실사용에 적합한 설계를 끌어내준다.
- 유지보수 혹은 재사용 시 단위테스트 케이스가 있다면 버그를 줄일 수 있다.

### 테스트 케이스 종류

1. Unit Test : 단위 테스트
프로그램 내부의 개별 컴포넌트 동작을 테스트하는 테스트이다.
배포 전 자동으로 실행되도록 많이 사용하는 테스트이다.
2. Integration Test : 통합테스트
개별 컴포넌트을 합쳐 전체 동작 테스트를 진행한다.
Unit Test에서 테스트한 개별 컴포넌트들이 유기적으로 잘 동작하는지 통합 테스트를 진행하게 된다.
개인적으로 로직 테스트라고도 생각한다.
3. E2E Test : End To End Test
제일 중요하다고 생각하는 테스트 단계이다.
실제 유저가 사용하는 유저의 시나리오대로 네트워크를 통해 서버의 EndPoint 를 호출해 테스트한다.

- Unit Test 작성법 
**1. 테스트 라이브러리 사용!** JUnit5 + mockito 가 인기많음.. ( 저는 사실 JUnit 만 보고 mockito는 처음 봤어요..)
**2. Test Double**
    Stub : 원래 구현을 최대한 단순한 것으로 대체하여 테스트를 위해 프로그래밍된 항목에만 응답한다.
    Spy : Stub의 역할을 하며 호출에 대한 정보를 기록한다.
    Mock : 행위를 검증하기 위해 가짜 객체를 만들어 테스트한다. Stub이 상태를 검증한다면 Mock은 행위를 검증
**3. given - when - then 패턴 사용**
   - given : 테스트에 대한 pre-condition
   - when : 테스트하고 싶은 동작 호출
   - then : 테스트 결과 확인

### 테스트 원칙 FIRST

---

**FIRST properties of unit Tests**

- Fast : 빠르게 
테스트 코드는 빨리 돌아야한다. 자주 돌려야하기 때문이다.
- Independent : 독립적으로
각 테스트 코드는 독립적으로 작성한다.
서로에게 의존하게 되면 실패한 원인을 찾기 어렵다.
- Repeatable : 반복가능하게
테스트 코드는 어떤 환경에서도 반복 가능해야 한다.
- Self-Validating : 자가검증하는
테스트는 true 아니면 false 값을 리턴하는 bool 값 결과를 내야한다.
- Timely : 적시에
테스트 코드는 테스트하려는 실제 코드를 구현하기 직전에 구현해야 한다.

---

- 원본 노션 링크 : https://www.notion.so/Clean-Code-9-01a7e27c7168408c890771fc26b2783b
